<html xmlns:v="urn:schemas-microsoft-com:vml"
xmlns:o="urn:schemas-microsoft-com:office:office"
xmlns:w="urn:schemas-microsoft-com:office:word"
xmlns:st1="urn:schemas-microsoft-com:office:smarttags"
xmlns="http://www.w3.org/TR/REC-html40">

<head>
<meta http-equiv=Content-Type content="text/html; charset=windows-1252">
<meta name=ProgId content=Word.Document>
<meta name=Generator content="Microsoft Word 11">
<meta name=Originator content="Microsoft Word 11">
<link rel=File-List href="readme_files/filelist.xml">
<title>DRAS Client REST Web Service</title>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="place"/>
<o:SmartTagType namespaceuri="urn:schemas-microsoft-com:office:smarttags"
 name="City"/>
<!--[if gte mso 9]><xml>
 <o:DocumentProperties>
  <o:Author>dan</o:Author>
  <o:LastAuthor>dan</o:LastAuthor>
  <o:Revision>20</o:Revision>
  <o:TotalTime>1053</o:TotalTime>
  <o:Created>2008-05-03T05:37:00Z</o:Created>
  <o:LastSaved>2009-07-13T02:25:00Z</o:LastSaved>
  <o:Pages>1</o:Pages>
  <o:Words>779</o:Words>
  <o:Characters>4446</o:Characters>
  <o:Company>.</o:Company>
  <o:Lines>37</o:Lines>
  <o:Paragraphs>10</o:Paragraphs>
  <o:CharactersWithSpaces>5215</o:CharactersWithSpaces>
  <o:Version>11.9999</o:Version>
 </o:DocumentProperties>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:WordDocument>
  <w:SpellingState>Clean</w:SpellingState>
  <w:GrammarState>Clean</w:GrammarState>
  <w:PunctuationKerning/>
  <w:ValidateAgainstSchemas/>
  <w:SaveIfXMLInvalid>false</w:SaveIfXMLInvalid>
  <w:IgnoreMixedContent>false</w:IgnoreMixedContent>
  <w:AlwaysShowPlaceholderText>false</w:AlwaysShowPlaceholderText>
  <w:Compatibility>
   <w:BreakWrappedTables/>
   <w:SnapToGridInCell/>
   <w:WrapTextWithPunct/>
   <w:UseAsianBreakRules/>
   <w:DontGrowAutofit/>
  </w:Compatibility>
  <w:BrowserLevel>MicrosoftInternetExplorer4</w:BrowserLevel>
 </w:WordDocument>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <w:LatentStyles DefLockedState="false" LatentStyleCount="156">
 </w:LatentStyles>
</xml><![endif]--><!--[if !mso]><object
 classid="clsid:38481807-CA0E-42D2-BF39-B33AF135CC4D" id=ieooui></object>
<style>
st1\:*{behavior:url(#ieooui) }
</style>
<![endif]-->
<style>
<!--
 /* Style Definitions */
 p.MsoNormal, li.MsoNormal, div.MsoNormal
	{mso-style-parent:"";
	margin:0in;
	margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:12.0pt;
	font-family:"Times New Roman";
	mso-fareast-font-family:"Times New Roman";}
h1
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-font-kerning:16.0pt;}
h2
	{mso-style-next:Normal;
	margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	mso-pagination:widow-orphan;
	page-break-after:avoid;
	mso-outline-level:2;
	font-size:14.0pt;
	font-family:Arial;
	font-style:italic;}
p.MsoTitle, li.MsoTitle, div.MsoTitle
	{margin-top:12.0pt;
	margin-right:0in;
	margin-bottom:3.0pt;
	margin-left:0in;
	text-align:center;
	mso-pagination:widow-orphan;
	mso-outline-level:1;
	font-size:16.0pt;
	font-family:Arial;
	mso-fareast-font-family:"Times New Roman";
	mso-font-kerning:14.0pt;
	font-weight:bold;}
a:link, span.MsoHyperlink
	{color:blue;
	text-decoration:underline;
	text-underline:single;}
a:visited, span.MsoHyperlinkFollowed
	{color:purple;
	text-decoration:underline;
	text-underline:single;}
span.grame
	{mso-style-name:grame;}
span.spelle
	{mso-style-name:spelle;}
span.SpellE
	{mso-style-name:"";
	mso-spl-e:yes;}
span.GramE
	{mso-style-name:"";
	mso-gram-e:yes;}
@page Section1
	{size:8.5in 11.0in;
	margin:1.0in 1.25in 1.0in 1.25in;
	mso-header-margin:.5in;
	mso-footer-margin:.5in;
	mso-paper-source:0;}
div.Section1
	{page:Section1;}
 /* List Definitions */
 @list l0
	{mso-list-id:594285217;
	mso-list-type:hybrid;
	mso-list-template-ids:-765132814 67698689 67698691 67698693 67698689 67698691 67698693 67698689 67698691 67698693;}
@list l0:level1
	{mso-level-number-format:bullet;
	mso-level-text:\F0B7;
	mso-level-tab-stop:39.0pt;
	mso-level-number-position:left;
	margin-left:39.0pt;
	text-indent:-.25in;
	font-family:Symbol;}
@list l0:level2
	{mso-level-tab-stop:1.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level3
	{mso-level-tab-stop:1.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level4
	{mso-level-tab-stop:2.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level5
	{mso-level-tab-stop:2.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level6
	{mso-level-tab-stop:3.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level7
	{mso-level-tab-stop:3.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level8
	{mso-level-tab-stop:4.0in;
	mso-level-number-position:left;
	text-indent:-.25in;}
@list l0:level9
	{mso-level-tab-stop:4.5in;
	mso-level-number-position:left;
	text-indent:-.25in;}
ol
	{margin-bottom:0in;}
ul
	{margin-bottom:0in;}
-->
</style>
<!--[if gte mso 10]>
<style>
 /* Style Definitions */
 table.MsoNormalTable
	{mso-style-name:"Table Normal";
	mso-tstyle-rowband-size:0;
	mso-tstyle-colband-size:0;
	mso-style-noshow:yes;
	mso-style-parent:"";
	mso-padding-alt:0in 5.4pt 0in 5.4pt;
	mso-para-margin:0in;
	mso-para-margin-bottom:.0001pt;
	mso-pagination:widow-orphan;
	font-size:10.0pt;
	font-family:"Times New Roman";
	mso-ansi-language:#0400;
	mso-fareast-language:#0400;
	mso-bidi-language:#0400;}
</style>
<![endif]--><!--[if gte mso 9]><xml>
 <o:shapedefaults v:ext="edit" spidmax="4098"/>
</xml><![endif]--><!--[if gte mso 9]><xml>
 <o:shapelayout v:ext="edit">
  <o:idmap v:ext="edit" data="1"/>
 </o:shapelayout></xml><![endif]-->
</head>

<body lang=EN-US link=blue vlink=purple style='tab-interval:.5in'>

<div class=Section1>

<p class=MsoTitle>Akuacom OpenADR DRAS Client</p>

<p class=MsoTitle><span class=SpellE>BACnet</span> Web Service</p>

<p class=MsoNormal align=center style='text-align:center'>Release 1.3</p>

<p class=MsoNormal align=center style='text-align:center'>12 July 2009</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<h1>Introduction</h1>

<p class=MsoNormal>This package contains documentation and sample java code for
accessing the Akuacom OpenADR DRAS client <span class=SpellE>BACnet</span> web
service (<span class=SpellE>BACnetWS</span>). Complete documentation for the
OpenADR client interfaces can be found at <a
href="http://www.openadr.org/docs.html">http://www.openadr.org/docs.html</a>. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The <span class=SpellE>BACnetWS</span> provides DRAS clients
with a simple method for retrieving DRAS event information over the Internet. Akuacom
recommends making the SOAP method call once per minute. After making the SOAP
call to get the event information, the DRAS client must confirm receipt of the
information using another SOAP method call.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The web service is available on the Client Developer Server
in SSL and non SSL versions. </p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in;mso-list:l0 level1 lfo1;
tab-stops:list 39.0pt'><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>non SSL endpoint: <a
href="http://www.test1.openadr.com/DRASClientWS/nossl/bacnet">http://www.test1.openadr.com/DRASClientWS/nossl/bacnet
</a><span style='mso-spacerun:yes'> </span></p>

<p class=MsoNormal style='margin-left:39.0pt;text-indent:-.25in;mso-list:l0 level1 lfo1;
tab-stops:list 39.0pt'><![if !supportLists]><span style='font-family:Symbol;
mso-fareast-font-family:Symbol;mso-bidi-font-family:Symbol'><span
style='mso-list:Ignore'>·<span style='font:7.0pt "Times New Roman"'>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
</span></span></span><![endif]>SSL endpoint: <a
href="https://www.test1.openadr.com/DRASClientWS/bacnet">https://www.test1.openadr.com/DRASClientWS/bacnet
</a><span style='mso-spacerun:yes'>  </span></p>

<h1>Contents</h1>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>This package includes the following files:</p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
class=SpellE><span style='font-size:10.0pt;font-family:"Courier New"'>build.xml</span></span><span
style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>           </span><span style='mso-tab-count:4'>                      </span>-
ant build file for java example<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
class=GramE><span style='font-size:10.0pt;font-family:"Courier New"'>classes</span></span><span
style='font-size:10.0pt;font-family:"Courier New"'>/**<span
style='mso-spacerun:yes'>          </span><span style='mso-tab-count:4'>                      </span>-
java example class file<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
style='font-size:10.0pt;font-family:"Courier New"'>readme.html<span
style='mso-spacerun:yes'>         </span><span style='mso-tab-count:4'>                      </span>-
this file <o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
class=SpellE><span style='font-size:10.0pt;font-family:"Courier New"'>run.bat</span></span><span
style='font-size:10.0pt;font-family:"Courier New"'><span
style='mso-spacerun:yes'>             </span><span style='mso-tab-count:4'>                      </span>-
dos batch file to run java example<o:p></o:p></span></p>

<p class=MsoNormal style='mso-layout-grid-align:none;text-autospace:none'><span
class=SpellE><span class=GramE><span style='font-size:10.0pt;font-family:"Courier New"'>src</span></span></span><span
style='font-size:10.0pt;font-family:"Courier New"'>/**<span
style='mso-spacerun:yes'>              </span><span style='mso-tab-count:4'>                      </span>-
java example source file<o:p></o:p></span></p>

<h1>WSDL<o:p></o:p></h1>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
WSDL file can be obtained by appending a “<span class=GramE><span class=grame>?</span><span
class=SpellE><span class=spelle>wsdl</span></span></span>” suffix on the end of
the end point (e.g., in the non SSL case: <a
href="http://www.test1.openadr.com/DRASClientWS/nossl/bacnet?wsdl"
wd3__shadow_href="http://www.test1.openadr.com/SOAPClientWS/nossl/soap?wsdl">http://www.test1.openadr.com/DRASClientWS/nossl/bacnet?wsdl</a>).
You must supply a valid client username and password to access the file.&nbsp;<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>Note
that the <span class=SpellE><span class=spelle><span style='font-family:"Courier New"'>soap</span></span><span
class=GramE><span class=grame><span style='font-family:"Courier New"'>:address</span></span></span></span><span
style='font-family:"Courier New"'> location</span> in the port binding section
of the WSDL returned from the server is incorrect. You should always override
this in your client with the endpoint given above.<o:p></o:p></p>

<h1>Definition, Instance, and Schema File</h1>

<p class=MsoNormal>See <a href="http://openadr.lbl.gov/src/1/">http://openadr.lbl.gov/src/1/</a>
for the Schema file and example Definition and Instance files. </p>

<h1>Simple DRAS Client</h1>

<p class=MsoNormal>A typical simple DRAS client only needs to parse the <span
class=SpellE><span class=GramE>EventStatus</span></span><span class=GramE><span
style='mso-spacerun:yes'>  </span>and</span> <span class=SpellE>OperationModeValue</span>
elements of the <span class=SpellE>simpleDRModeData</span> complex type and
translate the values into a shed strategy. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The <span class=SpellE>OperationModeValue</span> value is
used to indicate the current shed level for the facility: <st1:City w:st="on"><st1:place
 w:st="on">NORMAL</st1:place></st1:City>, MODERATE, or HIGH. A value of <st1:City
w:st="on"><st1:place w:st="on">NORMAL</st1:place></st1:City> indicates that no
shed is being requested. MODERATE and HIGH are relative shed levels, HIGH
requesting the maximum shed the facility is programmed for, and MODERATE being
somewhere between HIGH and <st1:City w:st="on"><st1:place w:st="on">NORMAL</st1:place></st1:City>.
Exactly how these levels control the facility is left up the controls vendor
and facility owner depending on desired DR performance and facility comfort.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>The <span class=SpellE>EventStatus</span> value is used to
indicate where in the event cycle the client is. FAR and NEAR are relative
indications that an event has been issued and the start time is approaching.
These values could be used to prepare a facility for the upcoming event by
triggering behaviors such as pre-cooling. ACTIVE indicates that the client is
between the start and end times of the event. When the <span class=SpellE>EventStatus</span>
is ACTIVE, the <span class=SpellE>OperationModeValue</span> should be inspected
to see what shed level is being indicated.</p>

<h1>Simple DRAS Gateway</h1>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>A simple DRAS client acting as a gateway to the facility
energy management and control system might turn the <span class=SpellE>OperationModeValue</span>
and <span class=SpellE>EventStatus</span> values into relay outputs. The
particular mapping of values to relay outputs described below was chosen to be
compatible with the Akuacom CLIR legacy DRAS client.</p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>Using two relays for <span class=SpellE>OperationModeValue</span>,
<st1:City w:st="on"><st1:place w:st="on">NORMAL</st1:place></st1:City> would
turn off both relays, MODERATE would turn on relay 1 and turn off relay 2, and
HIGH would turn on both relays. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>--------------------------------<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>| <span
class=GramE>value</span><span style='mso-spacerun:yes'>    </span>| relay 1 |
relay 2 |<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|----------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
NORMAL<span style='mso-spacerun:yes'>   </span>|<span
style='mso-spacerun:yes'>   </span>OFF<span style='mso-spacerun:yes'>  
</span>|<span style='mso-spacerun:yes'>   </span>OFF<span
style='mso-spacerun:yes'>   </span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|----------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
MODERATE |<span style='mso-spacerun:yes'>   </span>ON<span
style='mso-spacerun:yes'>    </span>|<span style='mso-spacerun:yes'>  
</span>OFF<span style='mso-spacerun:yes'>   </span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|----------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
HIGH<span style='mso-spacerun:yes'>     </span>|<span
style='mso-spacerun:yes'>   </span>ON<span style='mso-spacerun:yes'>   
</span>|<span style='mso-spacerun:yes'>   </span>ON<span
style='mso-spacerun:yes'>    </span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>--------------------------------<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'><o:p>&nbsp;</o:p></span></p>

<p class=MsoNormal>Using two relays for <span class=SpellE>EventStatus</span>,
FAR would turn off relay 3 and turn on relay 4, NEAR would turn on both relays,
and ACTIVE would turn on relay 3 and turn off relay 4. If only three relays are
available, NEAR and ACTIVE would turn on relay 3 and FAR would be ignored. </p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>------------------------------<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>| <span
class=GramE>value<span style='mso-spacerun:yes'>  </span>|</span> relay 3 |
relay 4 |<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|--------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
FAR<span style='mso-spacerun:yes'>    </span>|<span style='mso-spacerun:yes'>  
</span>OFF<span style='mso-spacerun:yes'>   </span>|<span
style='mso-spacerun:yes'>   </span>ON<span style='mso-spacerun:yes'>   
</span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|--------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
NEAR<span style='mso-spacerun:yes'>   </span>|<span style='mso-spacerun:yes'>  
</span>ON<span style='mso-spacerun:yes'>    </span>|<span
style='mso-spacerun:yes'>   </span>ON<span style='mso-spacerun:yes'>   
</span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|--------|---------|---------|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>|
ACTIVE |<span style='mso-spacerun:yes'>   </span>ON<span
style='mso-spacerun:yes'>    </span>|<span style='mso-spacerun:yes'>  
</span>OFF<span style='mso-spacerun:yes'>   </span>|<o:p></o:p></span></p>

<p class=MsoNormal><span style='font-size:10.0pt;font-family:"Courier New"'>------------------------------<o:p></o:p></span></p>

<p class=MsoNormal><o:p>&nbsp;</o:p></p>

<p class=MsoNormal>If the returned XML was empty, all relays would be turned
off.</p>

<h1>Example Java Client</h1>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
example java client, <span class=SpellE>BacnetWSClient</span>, does a single <span
class=SpellE><span style='-moz-background-clip: -moz-initial;-moz-background-origin: -moz-initial;
-moz-background-inline-policy: -moz-initial;background-attachment:scroll;
background-position-x:0%;background-position-y:50%'><span class=spelle><span
style='background:silver'>getValue</span></span></span>() method call on the
web service URL, prints the returned XML, parses out the <span class=SpellE><span
class=spelle>EventStatus</span></span> and <span class=SpellE><span
class=spelle>OperationModeValue</span></span>, and sends the confirmation
method. The example consists of a single source file in the <span class=SpellE><span
class=spelle>src</span></span> directory, <span class=SpellE>BacnetWSClient<span
class=spelle>.java</span></span>.<o:p></o:p></p>

<p class=MsoNormal style='mso-margin-top-alt:auto;mso-margin-bottom-alt:auto'>The
example comes precompiled in the release package (the class file is in the <span
class=GramE>classes</span> folder). To run it, double click on the <span
class=SpellE><span class=spelle>run.bat</span></span> file. An ant build file
is also supplied to rebuild the example.</p>

</div>

</body>

</html>
